require 'rspec'
require 'rake'
require 'sqlite3'
require 'active_record'
require 'sage_flow'
class SampleMigration < ActiveRecord::Migration
  def up
    create_table :samples do |t|
      t.string :name
    end
  end
  def down
    drop_table :samples
  end
end
migration = SampleMigration.new
ActiveRecord::Base.establish_connection(:adapter => 'sqlite3', :database => 'db/irb.db')
class Sample < ActiveRecord::Base
  include ActiveModel::Validations
  include SageFlow
end
migration.up
class Foo < Sample
  attr_accessor :sage_flow_state
  has_sage_flow_states :foo, :bar
end




f = Foo.new
f.sage_flow_state = "zing"
f.valid?
f.errors.messages.values.first.first